.. Generated by https://github.com/linawolf/t3docs_restructured_api_tools 
.. php:namespace::  TYPO3\CMS\Workspaces\Service

.. php:class:: WorkspaceService

   Workspace service
   
   See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php>`__.

   .. php:const:: TABLE_WORKSPACE
   
      :php:`'sys_workspace'`, type string
      
      .. php:const:: LIVE_WORKSPACE_ID
   
      :php:`0`, type integer
      
      
   
   .. php:method:: getAvailableWorkspaces()
   
      retrieves the available workspaces from the database and checks whether
      they're available to the current BE user
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L54>`__.
      
      
   .. php:method:: getCurrentWorkspace()
   
      Gets the current workspace ID.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L85>`__.
      
      
   .. php:method:: getPreviewLinkLifetime()
   
      easy function to just return the number of hours.
      
      a preview link is valid, based on the workspaces' custom value (default to 48 hours)
      or falls back to the users' TSconfig value "options.workspaces.previewLinkTTLHours".
      
      by default, it's 48hs.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L100>`__.
      
      :returntype: int
      :returns: The hours as a number
      
   .. php:method:: getWorkspaceTitle()
   
      Find the title for the requested workspace.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L120>`__.
      
      
   .. php:method:: getCmdArrayForPublishWS(int $wsid, bool $_, int $pageId, int|null $language)
   
      Building DataHandler CMD-array for publishing all versions in a workspace.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L149>`__.
      
      :param int $wsid: Real workspace ID, cannot be ONLINE (zero).
      :param bool $_: Unused, previously used to choose between swapping and publishing
      :param int $pageId: The page id
      :param int|null $language: Select specific language only
      
   .. php:method:: getCmdArrayForFlushWS(int $wsid, bool $flush, int $pageId, int $language)
   
      Building DataHandler CMD-array for releasing all versions in a workspace.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L190>`__.
      
      :param int $wsid: Real workspace ID, cannot be ONLINE (zero).
      :param bool $flush: Run Flush (TRUE) or ClearWSID (FALSE) command
      :param int $pageId: The page id
      :param int $language: Select specific language only
      
   .. php:method:: selectVersionsInWorkspace(int $wsid, int $stage, int $pageId, int $recursionLevel, string $selectionType, int $language)
   
      Select all records from workspace pending for publishing
      Used from backend to display workspace overview
      User for auto-publishing for selecting versions for publication
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L230>`__.
      
      :param int $wsid: Workspace ID. If -99, will select ALL versions from ANY workspace. If -98 will select all but ONLINE. >=-1 will select from the actual workspace
      :param int $stage: Stage filter: -99 means no filtering, otherwise it will be used to select only elements with that stage. For publishing, that would be "10
      :param int $pageId: Page id: Live page for which to find versions in workspace!
      :param int $recursionLevel: Recursion Level - select versions recursive - parameter is only relevant if $pageId != -1
      :param string $selectionType: How to collect records for "listing" or "modify" these tables. Support the permissions of each type of record, see \TYPO3\CMS\Core\Authentication\BackendUserAuthentication::check.
      :param int $language: Select specific language only
      
   .. php:method:: isNewPage(int $id, int $language)
   
      Determine whether a specific page is new and not yet available in the LIVE workspace
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L854>`__.
      
      :param int $id: Primary key of the page to check
      :param int $language: Language for which to check the page
      
   .. php:method:: hasPageRecordVersions()
   
      Determines whether a page has workspace versions.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L903>`__.
      
      
   .. php:method:: getPagesWithVersionsInTable()
   
      Gets all pages that have workspace versions per table.
      
      Result:
      [
        'sys_template' => [],
        'tt_content' => [
          1 => true,
          11 => true,
          13 => true,
          15 => true
        ],
        'tx_something => [
          15 => true,
          11 => true,
          21 => true
        ],
      ]
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/workspaces/Classes/Service/WorkspaceService.php#L963>`__.
