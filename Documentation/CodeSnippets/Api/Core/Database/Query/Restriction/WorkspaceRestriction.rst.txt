.. Generated by https://github.com/linawolf/t3docs_restructured_api_tools 
.. php:namespace::  TYPO3\CMS\Core\Database\Query\Restriction

.. php:class:: WorkspaceRestriction

   Restriction to make queries workspace-aware. This restriction is new compared to the "older"
   FrontendWorkspaceRestriction and BackendWorkspaceRestriction in a way that it ALWAYS fetches the live version,
   plus in current workspace the workspace records).
   
   It does not care about the state, as this should be done by overlays.
   
   As workspaces cannot be fully overlaid within ONE query, this query does the following:
   - In live context, only fetch published records
   - In a workspace, fetch all LIVE records and all workspace records which do not have "-1" (= all new placeholders get fetched as well)
   
   This means, that all records which are fetched need to run through either
   - BackendUtility::getRecordWSOL() (when having one or a few records)
   - PageRepository->versionOL()
   - PlainDataResolver (when having lots of records)
   
   See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Database/Query/Restriction/WorkspaceRestriction.php>`__.

   
   .. php:method:: buildExpression(array $queriedTables, \ExpressionBuilder $expressionBuilder)
   
      Main method to build expressions for given tables
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Database/Query/Restriction/WorkspaceRestriction.php#L60>`__.
      
      :param array $queriedTables: Array of tables, where array key is table alias and value is a table name
      :param \ExpressionBuilder $expressionBuilder: Expression builder instance to add restrictions with
      :returntype: TYPO3\\CMS\\Core\\Database\\Query\\Expression\\CompositeExpression
      :returns: The result of query builder expression(s)
