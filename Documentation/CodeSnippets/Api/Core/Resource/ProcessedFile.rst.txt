.. Generated by https://github.com/linawolf/t3docs_restructured_api_tools 
.. php:namespace::  TYPO3\CMS\Core\Resource

.. php:class:: ProcessedFile

   Representation of a specific processed version of a file. These are created by the FileProcessingService,
   which in turn uses helper classes for doing the actual file processing. See there for a detailed description.
   
   Objects of this class may be freshly created during runtime or being fetched from the database. The latter
   indicates that the file has been processed earlier and was then cached.
   
   Each processed file—besides belonging to one file—has been created for a certain task (context) and
   configuration. All these won't change during the lifetime of a processed file; the only thing
   that can change is the original file, or rather it's contents. In that case, the processed file has to
   be processed again. Detecting this is done via comparing the current SHA1 hash of the original file against
   the one it had at the time the file was processed.
   The configuration of a processed file indicates what should be done to the original file to create the
   processed version. This may include things like cropping, scaling, rotating, flipping or using some special
   magic.
   A file may also meet the expectations set in the configuration without any processing. In that case, the
   ProcessedFile object still exists, but there is no physical file directly linked to it. Instead, it then
   redirects most method calls to the original file object. The data of these objects are also stored in the
   database, to indicate that no processing is required. With such files, the identifier and name fields in the
   database are empty to show this.
   
   See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php>`__.

   .. php:const:: CONTEXT_IMAGEPREVIEW
   
      :php:`'Image.Preview'`, type string
      
      .. php:const:: CONTEXT_IMAGECROPSCALEMASK
   
      :php:`'Image.CropScaleMask'`, type string
      
      .. php:const:: FILETYPE_UNKNOWN
   
      :php:`0`, type integer
      
      .. php:const:: FILETYPE_TEXT
   
      :php:`1`, type integer
      
      .. php:const:: FILETYPE_IMAGE
   
      :php:`2`, type integer
      
      .. php:const:: FILETYPE_AUDIO
   
      :php:`3`, type integer
      
      .. php:const:: FILETYPE_VIDEO
   
      :php:`4`, type integer
      
      .. php:const:: FILETYPE_APPLICATION
   
      :php:`5`, type integer
      
      
   
   .. php:method:: calculateChecksum()
   
      Returns a unique checksum for this file's processing configuration and original file.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L168>`__.
      
      
   .. php:method:: setContents(string $contents)
   
      Replace the current file contents with the given string
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L182>`__.
      
      :param string $contents: The contents to write to the file.
      
   .. php:method:: updateWithLocalFile()
   
      Injects a local file, which is a processing result into the object.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L193>`__.
      
      
   .. php:method:: isIndexed()
   
      Returns TRUE if this file is indexed
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L219>`__.
      
      
   .. php:method:: isPersisted()
   
      Checks whether the ProcessedFile already has an entry in sys_file_processedfile table
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L230>`__.
      
      
   .. php:method:: isNew()
   
      Checks whether the ProcessedFile Object is newly created
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L240>`__.
      
      
   .. php:method:: isUpdated()
   
      Checks whether the object since last reconstitution, and therefore
      needs persistence again
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L251>`__.
      
      
   .. php:method:: setName()
   
      Sets a new file name
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L261>`__.
      
      
   .. php:method:: exists()
   
      Checks if this file exists.
      
      Since the original file may reside in a different storage
      we ask the original file if it exists in case the processed is representing it
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L282>`__.
      
      
   .. php:method:: isProcessed()
   
      Returns TRUE if this file is already processed.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L300>`__.
      
      
   .. php:method:: getOriginalFile()
   
      Getter for the Original, unprocessed File
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L310>`__.
      
      
   .. php:method:: getIdentifier()
   
      Get the identifier of the file
      
      If there is no processed file in the file system  (as the original file did not have to be modified e.g.
      when the original image is in the boundaries of the maxW/maxH stuff), then just return the identifier of
      the original file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L324>`__.
      
      
   .. php:method:: getName()
   
      Get the name of the file
      
      If there is no processed file in the file system (as the original file did not have to be modified e.g.
      when the original image is in the boundaries of the maxW/maxH stuff)
      then just return the name of the original file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L338>`__.
      
      
   .. php:method:: updateProperties()
   
      Updates properties of this object. Do not use this to reconstitute an object from the database; use
      reconstituteFromDatabaseRecord() instead!
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L352>`__.
      
      
   .. php:method:: toArray()
   
      Basic array function for the DB update
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L383>`__.
      
      
   .. php:method:: setUsesOriginalFile()
   
      Defines that the original file should be used.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L426>`__.
      
      
   .. php:method:: updateProcessingUrl(string url)
   
      
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L435>`__.
      
      :param string $url: the url
      
   .. php:method:: usesOriginalFile()
   
      
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L444>`__.
      
      
   .. php:method:: isOutdated()
   
      Returns TRUE if the original file of this file changed and the file should be processed again.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L454>`__.
      
      
   .. php:method:: delete()
   
      Delete processed file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L465>`__.
      
      
   .. php:method:: getProperty()
   
      Getter for file-properties
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L484>`__.
      
      
   .. php:method:: getUid()
   
      Returns the uid of this file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L498>`__.
      
      
   .. php:method:: needsReprocessing()
   
      Checks if the ProcessedFile needs reprocessing
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L508>`__.
      
      
   .. php:method:: getProcessingConfiguration()
   
      Returns the processing information
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L548>`__.
      
      
   .. php:method:: getTaskIdentifier()
   
      Getter for the task identifier.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L558>`__.
      
      
   .. php:method:: getTask()
   
      Returns the task object associated with this processed file.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L569>`__.
      
      :returntype: TYPO3\\CMS\\Core\\Resource\\Processing\\TaskInterface
      
   .. php:method:: generateProcessedFileNameWithoutExtension()
   
      Generate the name of of the new File
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L583>`__.
      
      
   .. php:method:: getPublicUrl()
   
      Returns a publicly accessible URL for this file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L597>`__.
      
      
   .. php:method:: hasProperty()
   
      Returns true if the given property key exists for this file.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L111>`__.
      
      
   .. php:method:: getProperties()
   
      Returns the properties of this object.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L135>`__.
      
      
   .. php:method:: getHashedIdentifier()
   
      Get hashed identifier
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L155>`__.
      
      
   .. php:method:: getNameWithoutExtension()
   
      Returns the basename (the name without extension) of this file.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L177>`__.
      
      
   .. php:method:: getSize()
   
      Returns the size of this file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L188>`__.
      
      
   .. php:method:: getSha1()
   
      Returns the Sha1 of this file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L218>`__.
      
      
   .. php:method:: getCreationTime()
   
      Returns the creation time of the file as Unix timestamp
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L232>`__.
      
      
   .. php:method:: getModificationTime()
   
      Returns the date (as UNIX timestamp) the file was last modified.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L246>`__.
      
      
   .. php:method:: getExtension()
   
      Get the extension of this file in a lower-case variant
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L259>`__.
      
      
   .. php:method:: getMimeType()
   
      Get the MIME type of this file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L273>`__.
      
      
   .. php:method:: getType()
   
      Returns the fileType of this file
      basically there are only five main "file types"
      "audio"
      "image"
      "software"
      "text"
      "video"
      "other"
      see the constants in this class
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L295>`__.
      
      
   .. php:method:: isImage()
   
      Useful to find out if this file can be previewed or resized as image.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L332>`__.
      
      :returntype: bool
      :returns: true if File has an image-extension according to $GLOBALS['TYPO3_CONF_VARS']['GFX']['imagefile_ext']
      
   .. php:method:: isMediaFile()
   
      Useful to find out if this file has a file extension based on any of the registered media extensions
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L341>`__.
      
      :returntype: bool
      :returns: true if File is a media-extension according to $GLOBALS['TYPO3_CONF_VARS']['SYS']['mediafile_ext']
      
   .. php:method:: isTextFile()
   
      Useful to find out if this file can be edited.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L351>`__.
      
      :returntype: bool
      :returns: true if File is a text-based file extension according to $GLOBALS['TYPO3_CONF_VARS']['SYS']['textfile_ext']
      
   .. php:method:: getContents()
   
      Get the contents of this file
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L364>`__.
      
      
   .. php:method:: getStorage()
   
      Get the storage this file is located in
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L399>`__.
      
      
   .. php:method:: getCombinedIdentifier()
   
      Returns a combined identifier of this file, i.e. the storage UID and the
      folder identifier separated by a colon ":".
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L456>`__.
      
      
   .. php:method:: setDeleted()
   
      Marks this file as deleted. This should only be used inside the
      File Abstraction Layer, as it is a low-level API method.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L489>`__.
      
      
   .. php:method:: isDeleted()
   
      Returns TRUE if this file has been deleted
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L499>`__.
      
      
   .. php:method:: rename(string $newName)
   
      Renames this file.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L512>`__.
      
      :param string $newName: The new file name
      
   .. php:method:: copyTo(\Folder $targetFolder, string $targetFileName, string $conflictMode)
   
      Copies this file into a target folder
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L530>`__.
      
      :param \Folder $targetFolder: Folder to copy file into.
      :param string $targetFileName: an optional destination fileName
      :param string $conflictMode: a value of the \TYPO3\CMS\Core\Resource\DuplicationBehavior enumeration
      
   .. php:method:: moveTo(\Folder $targetFolder, string $targetFileName, string $conflictMode)
   
      Moves the file into the target folder
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L548>`__.
      
      :param \Folder $targetFolder: Folder to move file into.
      :param string $targetFileName: an optional destination fileName
      :param string $conflictMode: a value of the \TYPO3\CMS\Core\Resource\DuplicationBehavior enumeration
      
   .. php:method:: getForLocalProcessing(bool $writable)
   
      Returns a path to a local version of this file to process it locally (e.g. with some system tool).
      
      If the file is normally located on a remote storages, this creates a local copy.
      If the file is already on the local system, this only makes a new copy if $writable is set to TRUE.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L585>`__.
      
      :param bool $writable: Set this to FALSE if you only want to do read operations on the file.
      
   .. php:method:: getParentFolder()
   
      Returns the parent folder.
      
      See source code on `GitHub <https://github.com/TYPO3/typo3/blob/main/typo3/sysext/core/Classes/Resource/ProcessedFile.php#L610>`__.
